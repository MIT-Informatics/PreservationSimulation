<!-- brokergroup_form_insert.j2 file -->
{% extends "brokergroup_setupform_base.j2" %}

<!-- Child file for Jinja2 that defines almost all the blocks
      of menu items, particularly the multi-value select 
      option blocks.  The shelf/instructions/*.ins3 files
      contain the various option values for the many 
      variable parameters.  They are processed and 
      dictionary-ified to be suitable for use by Jinja.  
     The parent HTML form file contains all the structure,
      including table layout, placement, commentary, 
      color fields, and so forth.  A small attempt, at
      any rate, to separate form from content.  -->

{# Macro to insert 2x1 table element for var, 
    top for heading, bottom for values. 
    All Values found in the dictionary 
    passed in. #}
{% macro insertmyvar(data, heading=none, required=none) %}    
    <td>
        <table>
            <tr><th align="left">
                <b>{%if heading%}{{heading}}{%else%}{{data.heading}}{%endif%}
                    {%if required%}<font color="red">* required</font>{%endif%}</b>
            </th></tr>
            <tr><td>
                <select name="{{data.varname}}">
    {% for item in data.lValueList %}
                <option value="{{ item.value }}"{% if item.selected != '0' %} selected{%endif%}>&nbsp;&nbsp;{{item.label}}&nbsp;</option>
    {% endfor %}
                </select>
            </td></tr>
        </table>
    </td>
{% endmacro %}

{# Macro for   m u l t i p l e   s e l e c t   var #}
{% macro insertmultivar(data, heading=none, required=none) %}    
    <td>
        <table>
            <tr><th align="left">
                <b>{%if heading%}{{heading}}{%else%}{{data.heading}}{%endif%}
                    {%if required%}<font color="red">* required</font>{%endif%}</b>
            </th></tr>
            <tr><td>
                <select name="{{data.varname}}" multiple size="6">
    {% for item in data.lValueList %}
                <option value="{{ item.value }}"{% if item.selected != '0' %} selected{%endif%}>&nbsp;&nbsp;{{item.label}}&nbsp;</option>
    {% endfor %}
                </select>
            </td></tr>
        </table>
    </td>
{% endmacro %}

{# Macro for   t e x t   v a r .  A similar table. #}
{% macro inserttextvar(name, heading, size, value="", required=none, extra=none) %}
    <td>
        <table>
            <tr><td>
                <b>{{heading}}
                    {%if required%}<font color="red">* required</font>{%endif%}</b>
            </td></tr>
            <tr><td>
                <input type="text" name={{name}} size="{{size}}" value="{{value}}"
                {%if extra%}{{extra}}{%endif%}>
            </td></tr>
        </table>
    </td>
{%endmacro%}

{# Macro for   c h e c k b o x   #}
{% macro insertcheckvar(name, heading, value="", required=none, extra=none) %}
    <td>
        <table>
            <tr><td>
                <b>{{heading}}
                    {%if required%}<font color="red">* required</font>{%endif%}</b>
            </td></tr>
            <tr><td>
                <input type="checkbox" name={{name}} value="{value}}"
                {%if extra%}{{extra}}{%endif%}>
            </td></tr>
        </table>
    </td>
{%endmacro%}

{# Macro for   s u b m i t   b u t t o n   #}
{% macro insertsubmitbutton(name, heading, value, required=none, 
            text="What do I say?", extra=none) %}
    <td>
        <table>
            <tr><td>
                <b>{{heading}}
                    {%if required%}<font color="red">* required</font>{%endif%}</b>
            </td></tr>
            <tr><td>
                <button type="submit" name={{name}} value={{value}} 
                    {%if extra%}{{extra}}{%endif%}>
                    <strong><font face="Arial" size="+3">  {{text}}  </font></strong>
                </button>
            </td></tr>
        </table>
    </td>
{%endmacro%}


{% block sFamilyDir scoped %}
   {{inserttextvar("sFamilyDir", "Family Directory", 15, required=true)}}
{% endblock %}

{% block sSpecificDir scoped %}
   {{inserttextvar("sSpecificDir", "Specific Directory", 15, required=true)}}
{% endblock %}

{% block bClearDirs scoped %}
    <b>Clear directory structure?</b><br/>
    Completely erase and re-establish directory tree<br/>
    <input type="checkbox" name="bClearDirs" value="true" class="largerCheckbox"><br/><br/>
{% endblock %}

{% block bClearDone scoped %}
    <b>Clear done records?</b><br/>
    Erase all done records from progress db<br/>
    <input type="checkbox" name="bClearDone" value="true" class="largerCheckbox"><br/><br/>
{% endblock %}

{% block buttonOK %}
{{insertsubmitbutton(name="ok", heading="", 
                value="start", text="OK", extra="bgcolor='#ffaaaa'" )}}
{% endblock %}

{% block buttonCancel %}
    {{insertsubmitbutton(name="cancel", heading="", 
                value="stop", text="Cancel", extra='bgcolor="#ffaaaa"' )}}
{% endblock %}


{%block ignoreme1%}
-----------------------------

<!-- Edit history:
20170220    RBL Original version.
20170221    RBL Enhance macros and invocations to permit overriding
                 headings, adding "required" notices, etc.  
20170222    RBL Add some comments and this history.  
20170520    RBL Add Redo.
                Add dummy blocks for Redo and TestOnly.
20171129    RBL Add multi-select var macro to be used for some vars.  
20171215    RBL Add check and logfilename for Run Detached.
20180103    RBL Move all the checkbox and button code into insert-blocks.  
                Get rid of all old blocks not needed here.  

-->

{%endblock%}
